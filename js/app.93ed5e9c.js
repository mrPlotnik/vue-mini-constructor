(function(){"use strict";var t={9020:function(t,e,o){var a={};o.r(a);var s={};o.r(s);var d=o(6369),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},c=[],i=o(3822),n={methods:{...(0,i.OI)(["loadBlocks"])},created(){const t=JSON.parse(localStorage.getItem("blocks"));t&&this.loadBlocks(t)}},l=n,u=o(1001),k=(0,u.Z)(l,r,c,!1,null,"77c82a63",null),p=k.exports,b=o(2631),v=function(){var t=this,e=t._self._c;return e("div",[e("header",{staticClass:"header"},[e("div",{staticClass:"container container-style"},[e("h1",[t._v("Mini-constructor")]),e("button",{staticClass:"btn-reset btn btn--edit block__edit-btn",on:{click:function(e){return t.editModeBtn()}}},[t._v(t._s(t.btnText))])])]),e("main",[e("div",t._l(t.state,(function(o,a){return e("section",[0===o.id?e("div",[e("ContentBlock",{attrs:{block:o,blockIndex:a}},[e("BlockMoveBtns",{attrs:{blockIndex:a}})],1)],1):t._e(),1===o.id?e("div",[e("CardsBlock",{attrs:{block:o,blockIndex:a}},[e("BlockMoveBtns",{attrs:{blockIndex:a}})],1)],1):t._e(),2===o.id?e("div",[e("MovieBlock",{attrs:{block:o,blockIndex:a}})],1):t._e()])})),0)]),e("footer",[e("div",{staticClass:"container"},[e("div",{staticClass:"btn-wrap"},[e("button",{staticClass:"btn-reset btn btn--edit",on:{click:function(e){return t.add(0)}}},[t._v("Add Content Block")]),e("button",{staticClass:"btn-reset btn btn--edit",on:{click:function(e){return t.add(1)}}},[t._v("Add Cards Block")]),e("button",{staticClass:"btn-reset btn btn--edit",on:{click:function(e){return t.add(2)}}},[t._v("Add Films Block")])])])])])},m=[],h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"block__move-btns"},[e("button",{staticClass:"btn-reset btn btn--edit",on:{click:function(e){return t.moveBlockUp(t.blockIndex)}}},[t._v("↑")]),e("button",{staticClass:"btn-reset btn btn--edit",on:{click:function(e){return t.moveBlockDown(t.blockIndex)}}},[t._v("↓")])])},_=[],f={name:"MoveBlockBtns",props:["block","blockIndex"],data(){return{}},computed:{...(0,i.Se)({state:"allBlocks"})},methods:{...(0,i.nv)(["updateMoveBlocks"]),moveBlockUp(t){const e=this.state.map((t=>({...t})));0!==t&&([e[t],e[t-1]]=[e[t-1],e[t]],this.updateMoveBlocks(e))},moveBlockDown(t){const e=this.state.map((t=>({...t}))),o=e.length;t!==o-1&&([e[t],e[t+1]]=[e[t+1],e[t]],this.updateMoveBlocks(e))}}},g=f,x=(0,u.Z)(g,h,_,!1,null,"8c026c8a",null),C=x.exports,B=function(){var t=this,e=t._self._c;return e("div",{staticClass:"block",attrs:{id:"content"}},[e("div",{staticClass:"container container-style"},[e("BlockTop",{attrs:{header:t.block.header,blockIndex:t.blockIndex}}),e("div",{staticClass:"block__body"},[t.editMode?t._e():e("p",[t._v(t._s(t.block.text))]),t.editMode?e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentText,expression:"currentText"}],staticClass:"textarea block__text-input",domProps:{value:t.currentText},on:{input:function(e){e.target.composing||(t.currentText=e.target.value)}}}):t._e()])],1)])},I=[],M=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"block__top"},[e("div",{staticClass:"block__header"},[t.editMode?t._e():e("h2",{staticClass:"block__top-header"},[t._v(t._s(t.header))]),t.editMode?e("input",{directives:[{name:"model",rawName:"v-model",value:t.currentBlockHeader,expression:"currentBlockHeader"}],staticClass:"input block__top-header-input",attrs:{type:"text"},domProps:{value:t.currentBlockHeader},on:{input:function(e){e.target.composing||(t.currentBlockHeader=e.target.value)}}}):t._e()]),e("div",{staticClass:"block__top-btns"},[t.editMode?e("BlockMoveBtns",{attrs:{blockIndex:t.blockIndex}}):t._e(),e("BlockTopBtns",{attrs:{blockIndex:t.blockIndex}})],1)])])},y=[],T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"btn-wrap"},[e("div",[t.editMode?e("button",{staticClass:"btn-reset btn btn--delete",on:{click:function(e){return t.del()}}},[t._v("Delete block")]):t._e()])])},w=[],S={name:"BlockTopBtns",props:["blockIndex"],data(){return{}},computed:{...(0,i.Se)({editMode:"editMode"})},methods:{...(0,i.nv)(["deleteBlock"]),del(){this.deleteBlock(this.blockIndex)}}},O=S,P=(0,u.Z)(O,T,w,!1,null,"5cba4c46",null),Z=P.exports,H={name:"BlockTop",props:["blockIndex","header"],components:{BlockMoveBtns:C,BlockTopBtns:Z},data(){return{currentBlockHeader:""}},computed:{...(0,i.Se)({editMode:"editMode"})},methods:{...(0,i.nv)(["updateBlockHeader"]),saveBlockHeader(){""!==this.currentBlockHeader&&this.updateBlockHeader({blockId:this.blockIndex,header:this.currentBlockHeader})}},created(){this.currentBlockHeader=this.header},watch:{editMode(t){t||this.saveBlockHeader()}}},N=H,j=(0,u.Z)(N,M,y,!1,null,null,null),E=j.exports,U={name:"ContentBlock",props:["block","blockIndex"],components:{BlockTop:E},data(){return{currentText:""}},computed:{...(0,i.Se)({editMode:"editMode"})},methods:{...(0,i.nv)(["updateBlockText"]),saveBlockText(){""!==this.currentText&&this.updateBlockText({blockId:this.blockIndex,text:this.currentText})}},created(){this.currentText=this.block.text},watch:{editMode(t){t||this.saveBlockText()}}},L=U,J=s["default"],q=(0,u.Z)(L,B,I,!1,null,null,null);"function"===typeof J&&J(q);var $=q.exports,A=function(){var t=this,e=t._self._c;return e("div",{staticClass:"block",attrs:{id:"cards"}},[t.showModal?e("div",{staticClass:"modal"},[e("div",{staticClass:"modal-wrap"}),e("div",{staticClass:"modal__content"},[e("p",[t._v("Enter URL image for "+t._s(t.cardIdEdit+1)+" cards")]),e("input",{attrs:{type:"text"},on:{input:function(e){t.cardImgUrlInput=e.target.value}}}),e("div",[e("button",{staticClass:"btn-reset btn btn--edit",on:{click:function(e){return t.saveCardImgUrl()}}},[t._v("Save")])])])]):t._e(),e("div",{staticClass:"container container-style"},[e("BlockTop",{attrs:{header:t.block.header,blockIndex:t.blockIndex}}),e("div",{key:t.reload,staticClass:"block__body"},[t._l(t.cards,(function(o,a){return e("div",{key:a,staticClass:"card"},[e("div",{staticClass:"card__head"},[t.editMode?e("div",{staticClass:"card__head-btns"},[e("div",{staticClass:"card__arrow-btns-wrap"},[e("button",{staticClass:"btn-reset btn btn--edit",on:{click:function(e){return t.moveCardLeft(a)}}},[t._v("<")]),e("button",{staticClass:"btn-reset btn btn--edit",on:{click:function(e){return t.moveCardRight(a)}}},[t._v(">")])]),e("button",{staticClass:"btn-reset btn btn--edit",on:{click:function(e){return t.showInputModal(a)}}},[t._v("Img")]),t.editMode?e("button",{staticClass:"btn-reset btn btn--delete",on:{click:function(e){return t.deleteCard(a)}}},[t._v("X")]):t._e()]):t._e(),e("div",{staticClass:"card__img",style:{"background-image":`url(${o.img})`},attrs:{alt:""}})]),e("div",{staticClass:"card__body"},[e("div",{staticClass:"card__descr"},[t.editMode?t._e():e("h3",[t._v(t._s(o.header))]),t.editMode?e("input",{directives:[{name:"model",rawName:"v-model",value:t.cards[a].header,expression:"cards[cardIndex].header"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.cards[a].header},on:{input:function(e){e.target.composing||t.$set(t.cards[a],"header",e.target.value)}}}):t._e(),t.editMode?t._e():e("p",{staticClass:"card__text"},[t._v(t._s(o.text))]),t.editMode?e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cards[a].text,expression:"cards[cardIndex].text"}],staticClass:"textarea",domProps:{value:t.cards[a].text},on:{input:function(e){e.target.composing||t.$set(t.cards[a],"text",e.target.value)}}}):t._e()])])])})),t.editMode?e("div",{staticClass:"card card-plus"},[e("div",{staticClass:"card-plus__img",attrs:{alt:"Plus"},on:{click:function(e){return t.addCard()}}})]):t._e()],2)],1)])},D=[],R=(o(7658),{name:"CardsBlock",props:["block","blockIndex"],components:{BlockTop:E},data(){return{reload:0,cards:[],defaultCard:{header:"Card header",text:"Card text",img:"img/01.jpg"},showModal:!1,cardIdEdit:"",cardImgUrl:"",cardImgUrlInput:""}},computed:{...(0,i.Se)({editMode:"editMode"})},methods:{...(0,i.nv)(["updateCards","updateCards"]),validCards(){this.cards=this.cards.map(((t,e)=>""===t.header?{...t,header:this.block.cards[e].header}:""===t.text?{...t,text:this.block.cards[e].text}:t))},saveCards(){this.validCards(),this.updateCards({blockId:this.blockIndex,cards:this.cards})},deleteCard(t){this.cards.splice(t,1),this.updateCards({blockId:this.blockIndex,cards:this.cards})},addCard(){this.cards.push(this.defaultCard),this.updateCards({blockId:this.blockIndex,cards:this.cards})},showInputModal(t){this.showModal=!0,this.cardIdEdit=t},saveCardImgUrl(){const t=/(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|gif|png)/;t.test(this.cardImgUrlInput)?(this.cardImgUrl=this.cardImgUrlInput,this.cards[this.cardIdEdit].img=this.cardImgUrlInput,this.showModal=!1):this.showModal=!1},moveCardLeft(t){const e=this.cards;0!==t&&([e[t],e[t-1]]=[e[t-1],e[t]],this.reload+=1)},moveCardRight(t){const e=this.cards,o=e.length;t!==o-1&&([e[t],e[t+1]]=[e[t+1],e[t]],this.reload+=1)}},created(){this.cards=this.block.cards.map((t=>({...t})))},watch:{editMode(t){t||this.saveCards()},block:{deep:!0,handler(){this.cards=this.block.cards.map((t=>({...t})))}}}}),F=R,V=(0,u.Z)(F,A,D,!1,null,"d908fba4",null),W=V.exports,X=function(){var t=this,e=t._self._c;return e("div",{staticClass:"block",attrs:{id:"movies"}},[e("div",{staticClass:"container container-style"},[e("BlockTop",{attrs:{header:t.block.header,blockIndex:t.blockIndex}}),e("div",{staticClass:"block__body"},[!0===t.isLoading?e("div",{staticClass:"loading"},[t._v("Loading...")]):!0===t.isError?e("div",{staticClass:"error"},[e("span",[t._v("Use VPN")]),e("button",{on:{click:function(e){return t.loadMovies(t.blockIndex)}}},[t._v("Try again")])]):t._l(t.movies,(function(o,a){return e("div",{staticClass:"mcard"},[e("div",{staticClass:"mcard__img",style:{"background-image":`url(${o.poster_path})`},attrs:{alt:"Poster"}}),e("div",{staticClass:"mcard__average"},[e("span",[t._v(t._s(o.average)+"%")])])])}))],2)],1)])},z=[],G=o(4161),K={name:"MovieBlock",props:["block","blockIndex"],components:{BlockTop:E},data(){return{isLoading:!0,isError:!1,movies:[]}},methods:{loadMovies(){return G.Z.get("https://api.themoviedb.org/3/movie/popular",{params:{api_key:"c645acdf2e5fdf61fd0544322ae288ed"}}).then((t=>{const e=t.data.results,o=[];e.forEach((t=>{const e={};e.id=t.id,e.title=t.title,e.poster_path=`https://www.themoviedb.org/t/p/w220_and_h330_face/${t.poster_path}`,e.average=10*t.vote_average,o.push(e)})),this.movies=o,this.isLoading=!1,this.isError=!1})).catch((()=>{this.isLoading=!1,this.isError=!0}))}},created(){this.loadMovies()}},Q=K,Y=(0,u.Z)(Q,X,z,!1,null,"be04ce9c",null),tt=Y.exports,et={name:"HelloWorld",components:{BlockMoveBtns:C,ContentBlock:$,CardsBlock:W,MovieBlock:tt},data(){return{btnText:"Edit",defaultBlocks:[{id:0,header:"Content",text:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Ad qui placeat laudantium quas molestiae autem eligendi minima eos, obcaecati deleniti nulla est dignissimos, aut voluptatibus nam dolorum soluta, animi architecto eum? Eligendi, expedita id eveniet vel incidunt quaerat nemo reprehenderit accusantium eius magnam, saepe aliquid tempora fuga, aspernatur placeat itaque."},{id:1,header:"Cards",cards:[{header:"1 card header",text:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Natus officiis fuga ut, tempore et quae autem molestiae porro excepturi asperiores amet consectetur adipisicing elit. Ipsum dolor sit amet consectetur adipisicing",img:"img/01.jpg"},{header:"2 card header ",text:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Natus officiis fuga ut, tempore et quae.",img:"img/01.jpg"},{header:"3 card header",text:"Card text",img:"img/01.jpg"},{header:"4 card header",text:"Card text",img:"img/01.jpg"}]},{id:2,header:"Popular movies"}]}},computed:{...(0,i.Se)({state:"allBlocks",editMode:"editMode"})},methods:{...(0,i.nv)(["addBlock","editModeToggle"]),add(t){const e=this.defaultBlocks[t];this.addBlock(e)},editModeBtn(){this.editModeToggle(),this.editMode?this.btnText="Apply":this.btnText="Edit"}}},ot=et,at=(0,u.Z)(ot,v,m,!1,null,"a2f7ffc8",null),st=at.exports;d.ZP.use(b.ZP);const dt=[{path:"/",name:"home",component:st}],rt=new b.ZP({mode:"history",base:"/vue-mini-constructor/",routes:dt});var ct=rt;d.ZP.use(i.ZP);var it=new i.ZP.Store({state:{blocks:[],editMode:!1},getters:{allBlocks(t){return t.blocks},editMode(t){return t.editMode}},mutations:{loadBlocks(t,e){t.blocks=e,localStorage.setItem("blocks",JSON.stringify(t.blocks))},addBlock(t,e){t.blocks.push(e),localStorage.setItem("blocks",JSON.stringify(t.blocks))},deleteBlock(t,e){t.blocks.splice(e,1),localStorage.setItem("blocks",JSON.stringify(t.blocks))},updateMoveBlocks(t,e){t.blocks=e,localStorage.setItem("blocks",JSON.stringify(t.blocks))},updateBlockHeader(t,{blockId:e,header:o}){t.blocks[e].header=o,localStorage.setItem("blocks",JSON.stringify(t.blocks))},updateBlockText(t,{blockId:e,text:o}){t.blocks[e].text=o,localStorage.setItem("blocks",JSON.stringify(t.blocks))},updateCards(t,{blockId:e,cards:o}){t.blocks[e].cards=o,localStorage.setItem("blocks",JSON.stringify(t.blocks))},editModeToggle(t){t.editMode=!t.editMode}},actions:{loadBlocks(t,e){t.commit("loadBlocks",e)},addBlock(t,e){t.commit("addBlock",e)},deleteBlock(t,e){t.commit("deleteBlock",e)},updateMoveBlocks(t,e){t.commit("updateMoveBlocks",e)},updateBlockHeader(t,{blockId:e,header:o}){t.commit("updateBlockHeader",{blockId:e,header:o})},updateBlockText(t,{blockId:e,text:o}){t.commit("updateBlockText",{blockId:e,text:o})},updateCards(t,{blockId:e,cards:o}){t.commit("updateCards",{blockId:e,cards:o})},editModeToggle(t){t.commit("editModeToggle")}}});d.ZP.config.productionTip=!1,new d.ZP({router:ct,store:it,mainStyle:a["default"],render:t=>t(p)}).$mount("#app")}},e={};function o(a){var s=e[a];if(void 0!==s)return s.exports;var d=e[a]={exports:{}};return t[a](d,d.exports,o),d.exports}o.m=t,function(){var t=[];o.O=function(e,a,s,d){if(!a){var r=1/0;for(l=0;l<t.length;l++){a=t[l][0],s=t[l][1],d=t[l][2];for(var c=!0,i=0;i<a.length;i++)(!1&d||r>=d)&&Object.keys(o.O).every((function(t){return o.O[t](a[i])}))?a.splice(i--,1):(c=!1,d<r&&(r=d));if(c){t.splice(l--,1);var n=s();void 0!==n&&(e=n)}}return e}d=d||0;for(var l=t.length;l>0&&t[l-1][2]>d;l--)t[l]=t[l-1];t[l]=[a,s,d]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var a in e)o.o(e,a)&&!o.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,d,r=a[0],c=a[1],i=a[2],n=0;if(r.some((function(e){return 0!==t[e]}))){for(s in c)o.o(c,s)&&(o.m[s]=c[s]);if(i)var l=i(o)}for(e&&e(a);n<r.length;n++)d=r[n],o.o(t,d)&&t[d]&&t[d][0](),t[d]=0;return o.O(l)},a=self["webpackChunkvue_mini_constructor"]=self["webpackChunkvue_mini_constructor"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=o.O(void 0,[998],(function(){return o(9020)}));a=o.O(a)})();
//# sourceMappingURL=app.93ed5e9c.js.map